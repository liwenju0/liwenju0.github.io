---
layout: post
title:  "IEEE754浮点标准"
date:   2022-03-01 08:54:08 +0800
tags: 计算机基础
---


### 一、基本结构
浮点系统采用位模式来表示数值。一个数值的表示由3部分组成：符号位（S)、阶码（E)和尾数（M)。每个（S，E，M)模式根据下列格式可以标识一个唯一的数值：

$$
value = (-1)^S\times1.M\times{2^{E-bias}}
$$

S的含义最简单，0表示正数，1表示负数。

E和M的含义要复杂的多。

下面的示例中，假设一个浮点数包含1位符号位，3位阶码和两位尾数。

### 二、M
1.M是标准要求的形式，这使得对于每个浮点数而言，它的尾数是唯一的。

满足这种限制条件的数称之为规格化数（Normalized Numbers）。

实际中，前面的1是可以省略的，因为这是约定俗成的。

举例来说，0.5D允许的唯一尾数是M=0.

$0.5D = 1.0B \times 2^{-1}$

D表示10进制，B表示二进制。

据此，m位的尾数就可以有效表示（m+1)位尾数的值。

### 三、E
用于表示E的位数决定了数的表示范围。

比较复杂的是E的表示方法。

首先补充一点正码、反码和补码的基础知识。

**原码**

将一个整数，转换成二进制，就是其原码。

如单字节的5的原码为：0000 0101；-5的原码为1000 0101。

**反码**

正数的反码就是其原码；负数的反码是将原码中，除符号位以外，每一位取反。

如单字节的5的反码为：0000 0101；-5的反码为1111 1010。


**补码**

正数的补码就是其原码；负数的反码+1就是补码。

如单字节的5的补码为：0000 0101；-5的原码为1111 1011。

**余码**
在e位的表示系统中，补码加上($2^{e-1}-1$)就构成它的余码表示法。
余码表示法的好处是无符号比较器可以用来比较有符号数。

实际标准中，E就是用余码表示的。

假设E用三位表示，那么它可以表示的范围是-3到+3。
当把它的余码表示看做无符号数时，发现也是单调递增的。

如下表所示：

| 二进制补码 | 十进制值 | 余码 |
| :-----:| :----: | :----: |
| 101 | -3 | 000 |
| 110 | -2 | 001 |
| 111 | -1 | 010 |
| 000 | -0 | 011 |
| 001 | 1 | 100 |
| 010 | 2 | 101 |
| 011 | 3 | 110|
| 100 | 保留模式 | 111 |

留心观察会看到，余码表示法中，尾数为0表示奇数，尾数为1，表示偶数。

### 四、举例说明
用6位的格式来表示0.5D.

0.5D=0 010 00

其中，S=0，E=010， M=（1.）00

n = 3

具体计算过程如下：

{% raw %}
$$

\begin{split}

(-1)^0\times 1.00B\times2^{010B-(2^{(3-1)}-1)D} \\
&= 1 \times 1B \times 2^{010B-011B} \\
&= 1 \times 1B \times 2^{101B} \\
&= 1 \times 1D \times 2^{-1D} \\
&= 0.5D
\end{split}


$$
{% endraw %}

这里有两个容易混淆的地方，第一个，就是E是用余码表示的，总想把它还原成原码，这是不用的。直接将E和bias都看做一个无符号数进行相减，得到的数当做原码表示就可以了。

第二个，就是二进制和十进制的转换节点，对于尾码，随时可以转换，对于阶码，要在E-bias之后进行计算。






